<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../../img/favicon.ico">
        <title>Pods e Nodes aprofundando o conhecimento - 8SOAT - FIAP</title>
        <link href="../../css/bootstrap.min.css" rel="stylesheet">
        <link href="../../css/font-awesome.min.css" rel="stylesheet">
        <link href="../../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css">
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script>hljs.highlightAll();</script> 
    </head>

    <body>
        <div class="navbar fixed-top navbar-expand-lg navbar-dark bg-primary">
            <div class="container">
                <a class="navbar-brand" href="../..">8SOAT - FIAP</a>
                <!-- Expander button -->
                <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#navbar-collapse">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <!-- Expanded navigation -->
                <div id="navbar-collapse" class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li class="navitem">
                                <a href="../.." class="nav-link">Início</a>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Conteúdos <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../ddd/" class="dropdown-item">Domain Driven Design</a>
</li>
                                    
<li>
    <a href="../../docker/" class="dropdown-item">Docker</a>
</li>
                                    
<li>
    <a href="../../software-architecture/" class="dropdown-item">Arquitetura de Software</a>
</li>
                                    
<li>
    <a href="../../clean-architecture/" class="dropdown-item">Arquitetura Limpa</a>
</li>
                                    
<li>
    <a href="../" class="dropdown-item">Kubernetes</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Ferramentas <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../tools/" class="dropdown-item">Indicações de Ferramentas</a>
</li>
                                </ul>
                            </li>
                            <li class="navitem">
                                <a href="../../about/" class="nav-link">Sobre</a>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav ml-auto">
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-toggle="modal" data-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="row">
                    <div class="col-md-3"><div class="navbar-light navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
    <div class="navbar-header">
        <button type="button" class="navbar-toggler collapsed" data-toggle="collapse" data-target="#toc-collapse" title="Table of Contents">
            <span class="fa fa-angle-down"></span>
        </button>
    </div>

    
    <div id="toc-collapse" class="navbar-collapse collapse card bg-secondary">
        <ul class="nav flex-column">
            
            <li class="nav-item" data-level="1"><a href="#pods-e-nodes-aprofundando-o-conhecimento" class="nav-link">Pods e Nodes aprofundando o conhecimento</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-level="2"><a href="#componentes-do-cluster" class="nav-link">Componentes do Cluster</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#o-que-sao-pods" class="nav-link">O que são pods?</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
        </ul>
    </div>
</div></div>
                    <div class="col-md-9" role="main">

<h1 id="pods-e-nodes-aprofundando-o-conhecimento">Pods e Nodes aprofundando o conhecimento</h1>
<h2 id="componentes-do-cluster">Componentes do Cluster</h2>
<h3 id="master-node">Master Node</h3>
<p>É um node que é reponsável por gerenciar os outros nodes, ele conta com módulos como: controller manager, scheduler e etcd.
Este node tem controle dos outros nodes - conhecidos como workers, e consegue escalá-los de modo que libere ou aumente recursos para que os pods possam trabalhar corretamente.</p>
<h3 id="worker-node">Worker Node</h3>
<p>São nodes que executam os pods e outros recursos</p>
<h3 id="etcd">Etcd</h3>
<p>É um banco de dados distribuído que armazena as configurações do cluster e estados dos objetos</p>
<h3 id="kubelet">kubelet</h3>
<p>É um agente que é executado em cada node do cluster, que gerencia os pods contidos nele.</p>
<h3 id="kube-proxy">Kube-proxy</h3>
<p>É responsável por estabelecer a comunicação de rede entre os pods no cluster</p>
<h3 id="comunicacao-e-rede">Comunicação e rede</h3>
<p>Os pods contidos em um node podem se comunicar com todos os pods no mesmo cluster (mesmo que em outros nodes) por meio de endereços de ip internos.</p>
<h2 id="o-que-sao-pods">O que são pods?</h2>
<p>É uma abstração do kubernetes para a execução de um único processo. Executando dentro de um pod podemos ter um ou mais conteineres.
São criados e excluídos conforme a necessidade, o que permite um alto gerenciamento de recursos.</p>
<p>Os Pods são criados a partir de definições YAML ou JSON, que especificam quais containers devem ser executados dentro do Pod, suas imagens e as portas em que cada container deve ouvir. Quando ele é criado, recebe um endereço IP interno dentro do cluster, permitindo que outros Pods se comuniquem com ele.</p>
<h3 id="rotulos">Rótulos</h3>
<p>Os  rótulos  são  pares  de  chave-valor  que  são  atribuídos  aos  objetos  no Kubernetes,  como  Pods,  Serviços,  Application  Controllers,  entre  outros.  Eles  são usados   para   identificar,   categorizar   e   selecionar   objetos   para   operações   de gerenciamento, como escalonamento e exclusão</p>
<p>Usabilidade:</p>
<ul>
<li>Designar objetos para desenvolvimento, teste e produção</li>
<li>Adicionar tags de versão</li>
<li>Classificar um objeto usando tags</li>
</ul>
<h3 id="anotacoes">Anotações</h3>
<p>As anotações, por outro lado, são pares de chave-valor opcionais que podem ser adicionadas a objetos no Kubernetes. Eles são usados para adicionar metadados adicionais aos objetos, como informações de depuração, documentação e políticas de segurança.</p>
<p>Quais são as principais diferenças entre pods e nodes? Por que separar em dois níveis?</p>
<p><strong>1. Separação de Responsabilidades:</strong></p>
<p>Pods agrupam contêineres que têm uma relação estreita e precisam compartilhar recursos (como volumes e rede). 
Esses contêineres são geralmente interdependentes e, por isso, precisam estar no mesmo ambiente de execução. Por exemplo, um pod pode conter uma aplicação e um contêiner auxiliar que faz logging ou monitoramento dessa aplicação.</p>
<p><strong>Nós são unidades de infraestrutura (máquinas físicas ou virtuais)</strong> que fornecem os <strong>recursos computacionais</strong> (CPU, memória, armazenamento) para executar os pods. Um nó pode hospedar vários pods, cada um com diferentes funções, de diferentes partes do sistema.</p>
<p><strong>2. Escalabilidade e Flexibilidade:</strong></p>
<p>Se você colocar todos os contêineres em um único pod, você perde a <strong>granularidade</strong> no controle de escala. 
Pods são pensados para serem pequenos, encapsulando um ou poucos contêineres interdependentes. Ao escalar um pod, você replica exatamente o que há dentro dele.</p>
<blockquote>
<p><strong>Exemplo:</strong> Se você tem uma API e um banco de dados no mesmo pod, ao escalar esse pod, você não pode escalar a API separadamente do banco de dados, mesmo que a API precise de mais replicas,  enquanto o banco não.
<strong>Escalando pods separados:</strong> Ao ter pods separados (ex.: um para a API, outro para o banco de dados), você pode escalar a API independente do banco. Isso te dá flexibilidade para adaptar cada parte da sua aplicação conforme a demanda.</p>
</blockquote>
<p><strong>3. Gerenciamento de Recursos:</strong></p>
<p>Nós permitem a otimização do uso de recursos. Em um cluster, Kubernetes distribui automaticamente os pods entre diferentes nós, garantindo um balanceamento eficiente da carga. 
Se todos os seus pods estivessem em um único nó, você estaria limitado pela capacidade de CPU, memória e armazenamento desse nó específico.
<strong>Se esse nó falhar, todos os pods falhariam juntos.</strong> Com múltiplos nós, o Kubernetes pode distribuir a carga e garantir alta disponibilidade.</p>
<p><strong>4. Resiliência e Isolamento:</strong></p>
<p>Ao separar seus contêineres em pods menores e independentes, você garante melhor isolamento entre diferentes componentes da sua aplicação. 
Se um contêiner dentro de um pod falha, o Kubernetes pode reiniciar apenas esse pod, sem impactar os outros pods no nó.</p>
<p>Se você colocar todos os contêineres em um único pod, qualquer falha em um dos contêineres pode potencialmente afetar outros, já que eles compartilham o mesmo ciclo de vida. Isso também prejudicaria a capacidade de isolar falhas e limitar danos.</p>
<p><strong>5. Alta Disponibilidade:</strong></p>
<p>Distribuir pods entre nós é uma prática essencial para garantir a alta disponibilidade. 
Ao espalhar seus pods entre diferentes nós, você minimiza o risco de falhas catastróficas. Se um nó cair, apenas os pods nele são afetados, e o Kubernetes pode rapidamente realocar os pods em outros nós disponíveis.</p>
<p>Se você tiver apenas um nó e ele falhar, todas as suas aplicações caem, independente de quantos pods você tem.</p>
<p><strong>6. Otimização de Carga e Uso de Recursos:</strong></p>
<p>Nó é a unidade de infraestrutura física/virtual que provê CPU, memória e armazenamento. 
Kubernetes gerencia os recursos dentro dos nós de forma eficiente, colocando mais pods em nós subutilizados e garantindo que a carga seja bem distribuída no cluster.</p>
<p>Escalar nós inteiros faz sentido quando os nós estão sobrecarregados ou sem recursos suficientes para hospedar mais pods. 
Mas você ainda quer o controle granular para escalar individualmente os pods que realmente precisam de mais instâncias, ao invés de escalar todos os contêineres dentro de um nó ou pod.</p>
<h3 id="resumo">Resumo</h3>
<p>Pods permitem agrupar contêineres interdependentes que precisam ser escalados juntos e compartilhar recursos.
Nós são unidades de infraestrutura que suportam a execução de vários pods e permitem a distribuição de carga.
A escalabilidade de pods separados te dá flexibilidade para ajustar recursos e desempenho por serviço, enquanto escalar nós te permite aumentar a capacidade de todo o cluster.
Distribuir pods em vários nós melhora a resiliência e alta disponibilidade.</p>
<p>Portanto, ter um pod por nó ou todos os contêineres em um único pod eliminaria muitos dos benefícios do Kubernetes, como gerenciamento de recursos, resiliência e escalabilidade granular.</p>
<p><a href="../">Voltar para Kubernetes</a></p></div>
            </div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script src="../../js/jquery-3.6.0.min.js"></script>
        <script src="../../js/bootstrap.min.js"></script>
        <script>
            var base_url = "../..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="../../js/base.js"></script>
        <script src="../../search/main.js"></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
                <p>From here you can search these documents. Enter your search terms below.</p>
                <form>
                    <div class="form-group">
                        <input type="search" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results" data-no-results-text="No results found"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
